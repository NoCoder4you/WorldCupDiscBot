/* =====================================================
   World Cup 2026 Admin Panel - FULL CSS
   - Page isolation (SPA)
   - Read-only vs admin gating
   - Header, nav, theme toggle
   - Dashboard cards, gauges
   - Tables for Cogs, Bets, Splits, Ownership
   - Logs window
   - Backups two-pane
   - FAB auth (popover + modal)
   ===================================================== */

/* ---------- Base + Theme ---------- */
:root{
  --bg:#0b1220;
  --fg:#e5e7eb;
  --muted:#9ca3af;
  --card:#131c2b;
  --accent:#10b981;
  --danger:#ef4444;
  --border:rgba(255,255,255,.08);
}
body.light-theme{
  --bg:#f8fafc;
  --fg:#0b1220;
  --muted:#374151;
  --card:#ffffff;
  --accent:#0ea5e9;
  --border:rgba(0,0,0,.08);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;
}

/* ---------- SPA page isolation ---------- */
section.page-section{display:none}
section.page-section.active-section{display:block}

/* ---------- Admin gating ---------- */
.requires-admin{display:none!important}
body.admin-mode .requires-admin{display:inline-flex!important}
[data-admin="true"]{display:none!important}
body.admin-mode [data-admin="true"]{display:block!important}

/* ---------- Header + Nav + Theme ---------- */
.topbar,.header-bar{
  display:flex;align-items:center;gap:10px;
  padding:10px 14px;border-bottom:1px solid var(--border);
  position:sticky;top:0;background:var(--bg);z-index:5
}
.brand{font-weight:700}
.menu{margin-left:auto}
.menu ul{list-style:none;margin:0;padding:0;display:flex;gap:8px}
.menu a{display:inline-block;padding:8px 12px;border-radius:8px;cursor:pointer;user-select:none;color:var(--fg);text-decoration:none}
.menu a.active{background:var(--accent);color:#fff}
.hamburger,.menu-icon{display:none;margin-left:12px;cursor:pointer}
#menu-toggle{display:none}
.theme-toggle-btn{margin-left:10px;border:1px solid var(--border);background:transparent;color:var(--fg);border-radius:8px;padding:6px 10px;cursor:pointer}

/* ---------- Content + Cards ---------- */
.content{padding:16px;max-width:1200px;margin:0 auto}
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px;margin-bottom:16px}
.row{display:flex;align-items:center;gap:10px}
.space-between{justify-content:space-between}
.btn{border:1px solid var(--border);background:transparent;color:var(--fg);border-radius:8px;padding:8px 10px;cursor:pointer}
.btn:hover{filter:brightness(.95)}
.btn.danger{background:var(--danger);border-color:var(--danger);color:#fff}
.btn-restart{border-color:rgba(16,185,129,.35)}
.btn-stop{border-color:rgba(239,68,68,.5)}

/* ---------- Dashboard ---------- */
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
.mini{background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:12px;padding:10px}
.mini.wide{grid-column:span 2}
.mini-title{font-size:13px;color:var(--muted)}
.mini-value{font-size:20px;margin-top:4px}
.mini-sub{color:var(--muted);font-size:12px;margin-top:6px}
.bot-down{color:#fca5a5;font-size:12px}
.dash-actions{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap}

/* ---------- Gauges (semi-circles) ---------- */
.gauges-flex{display:flex;gap:10px;flex-wrap:wrap}
.gauge{background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:12px;padding:10px;display:flex;align-items:center;gap:10px}
.gauge svg{width:64px;height:64px}
.gauge-bg{fill:none;stroke:#2b3447;stroke-width:6;opacity:.8}
.gauge-bar{fill:none;stroke:var(--accent);stroke-width:6;stroke-linecap:round;transform:rotate(-90deg);transform-origin:50% 50%}
.gauge-text{font:600 12px/1.2 system-ui;fill:var(--fg)}
.gauge-label{font-size:13px;color:var(--muted)}
#cpu-extra,#mem-extra,#disk-extra{font-size:12px;color:var(--muted)}

/* ---------- Tables (Ownership, Bets, Cogs, Splits) ---------- */
.table-card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px}
.table-header{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}
.table-title{font-weight:700}
.table-scroll{overflow:auto;max-height:60vh}
table{width:100%;border-collapse:collapse}
th,td{padding:8px 10px;border-bottom:1px solid var(--border);text-align:left}
.cog-ok{color:#22c55e;font-weight:700}
.cog-error{color:#f87171}
.not-verified{color:#fbbf24}
.unclaimed{color:#fca5a5}
.unassigned-icon{font-size:14px;vertical-align:middle}
.row-unassigned .owners{opacity:.9}

/* ---------- Logs ---------- */
.log-card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px}
.log-header{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}
.log-tabs{display:flex;gap:8px}
.log-tab{border:1px solid var(--border);background:transparent;color:var(--fg);border-radius:8px;padding:6px 10px;cursor:pointer}
.log-tab.active{background:rgba(255,255,255,.08)}
.log-actions{display:flex;gap:8px;align-items:center}
.log-window{border:1px solid var(--border);border-radius:8px;background:#0a0f1a;padding:10px;max-height:60vh;overflow:auto;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:12px}
.log-line{display:block;white-space:pre}
.log-level-ERROR{color:#fca5a5}
.log-level-WARNING{color:#fde68a}
.log-level-CRITICAL{color:#f87171;font-weight:700}
.log-level-INFO{color:#a5b4fc}
.log-level-DEBUG{color:#9ca3af}

/* ---------- Backups two-pane ---------- */
.backups-card{max-width:1080px;width:97vw;margin:2.5em auto 0;background:var(--card);box-shadow:0 4px 20px #0002;border-radius:16px;border:1.5px solid var(--border);display:flex;flex-direction:column;min-height:540px;padding:0}
.backups-header{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;border-bottom:1px solid var(--border)}
.backups-title{font-weight:700;letter-spacing:.5px;color:var(--accent)}
.backups-body{padding:1rem 1.25rem 1.25rem}
.backups-layout{display:grid;grid-template-columns:320px 1fr;gap:14px;align-items:stretch}
.backups-left{background:var(--bg);border:1px solid var(--border);border-radius:12px;padding:8px;overflow-y:auto}
.folder-item{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px 12px;margin:6px 0;border:1px solid var(--border);border-radius:10px;background:rgba(255,255,255,.02);cursor:pointer;user-select:none;transition:background .15s ease, box-shadow .15s ease, border-color .15s ease}
.folder-item:hover{background:rgba(255,255,255,.05)}
.folder-item.active{border-color:var(--accent);box-shadow:0 0 0 2px color-mix(in oklab, var(--accent) 40%, transparent);background:rgba(255,255,255,.06)}
.folder-name{font-weight:700;color:var(--fg)}
.folder-count{color:var(--muted);font-weight:600;font-size:.92rem}
.backups-right{background:var(--bg);border:1px solid var(--border);border-radius:12px;display:flex;flex-direction:column;overflow:hidden}
.right-head{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--border)}
.right-title{font-weight:700;color:var(--fg)}
.right-subtle{color:var(--muted);font-weight:600}
.right-list{padding:10px 12px 14px;overflow-y:auto}
.file-row{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:8px 6px;border-bottom:1px dashed var(--border)}
.file-meta{color:var(--muted);font-size:.95rem}
.file-download{display:inline-block;border:0;background:var(--accent);color:#101820;font-weight:800;font-size:.95rem;padding:6px 10px;border-radius:8px;cursor:pointer;text-decoration:none;transition:opacity .15s ease, transform .02s ease}
.file-download:hover{opacity:.9}.file-download:active{transform:translateY(1px)}
.right-empty{color:var(--muted);font-weight:600;padding:10px 6px}
@media (max-width: 900px){.backups-layout{grid-template-columns:280px 1fr}}
@media (max-width: 720px){.backups-layout{grid-template-columns:1fr}.backups-left{max-height:40vh}}

/* ---------- Ownership ---------- */
.ownership-card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px}
.ownership-header{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}
.ownership-title{font-weight:700}
.ownership-actions{display:flex;gap:8px;align-items:center}
.ownership-table-scroll{overflow:auto;max-height:60vh}
.ownership-table{width:100%;border-collapse:collapse}
.ownership-table th,.ownership-table td{padding:8px 10px;border-bottom:1px solid var(--border)}

/* ---------- Bets ---------- */
.betting-card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px}
.betting-header{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}
.betting-title{font-weight:700}
.betting-table-scroll{overflow:auto;max-height:60vh}
.betting-table{width:100%;border-collapse:collapse}
.betting-table th,.betting-table td{padding:8px 10px;border-bottom:1px solid var(--border)}
.settle-modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;z-index:1000}
.settle-modal-content{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:16px;min-width:300px}
.settle-modal-close{background:transparent;border:none;color:var(--fg);font-size:22px;cursor:pointer;position:absolute;right:10px;top:8px}
.settle-modal-btn-row{display:flex;gap:12px;justify-content:center}

/* ---------- Splits ---------- */
.split-requests-card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px}
.split-requests-header{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}
.split-requests-title{font-weight:700}
.split-requests-table-scroll{overflow:auto;max-height:60vh}
.split-requests-table{width:100%;border-collapse:collapse}
.split-requests-table th,.split-requests-table td{padding:8px 10px;border-bottom:1px solid var(--border)}
.split-dotmenu{border:1px solid var(--border);background:var(--card);border-radius:8px;padding:6px;box-shadow:0 12px 30px rgba(0,0,0,.4);z-index:1200}
.split-dotmenu-action{display:block;width:100%;text-align:left;border:0;background:transparent;color:var(--fg);padding:6px 10px;border-radius:6px;cursor:pointer}
.split-dotmenu-action:hover{background:rgba(255,255,255,.06)}

/* ---------- Cogs ---------- */
.cogs-card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px}
.cogs-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.cogs-title{font-weight:700}
.cogs-table-scroll{overflow:auto;max-height:60vh}
.cogs-table{width:100%;border-collapse:collapse}
.cogs-table th,.cogs-table td{padding:8px 10px;border-bottom:1px solid var(--border)}

/* ---------- Notify ---------- */
#notify-bar,.notify-bar{position:fixed;left:0;right:0;bottom:12px;display:flex;justify-content:center;pointer-events:none;z-index:1300}
.notify-success{background:var(--accent);color:#fff;padding:8px 12px;border-radius:8px}
.notify-error{background:var(--danger);color:#fff;padding:8px 12px;border-radius:8px}

/* ---------- FAB Auth ---------- */
#adminFab{
  position:fixed;bottom:20px;right:20px;width:56px;height:56px;border-radius:50%;
  border:none;font-size:26px;background:var(--accent);color:#fff;cursor:pointer;
  box-shadow:0 6px 14px rgba(0,0,0,.25);z-index:10000
}
#adminFab:hover{transform:scale(1.08)}
.wc-popover{position:fixed;bottom:86px;right:20px;display:none;z-index:10001}
.wc-popover.show{display:block}
.wc-popover__card{min-width:260px;background:var(--card);color:var(--fg);border:1px solid var(--border);border-radius:12px;padding:12px;box-shadow:0 14px 34px rgba(0,0,0,.35)}
.wc-popover__row{display:flex;gap:8px;margin-top:8px}
.wc-popover__row:first-child{margin-top:0}
.wc-popover input[type=password]{flex:1;padding:10px 12px;background:#0a0f1a;color:var(--fg);border:1px solid var(--border);border-radius:8px;outline:none}
.wc-popover button.ghost{background:transparent;border:1px solid var(--border)}
.wc-popover__error{color:#fca5a5;margin:6px 2px 0;font-size:13px}

/* ---------- Admin Modal ---------- */
.wc-modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.45);z-index:10002}
.wc-modal.show{display:flex}
.wc-modal__dialog{width:min(760px,95vw);background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden;color:var(--fg)}
.wc-modal__header{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--border)}
.wc-modal__body{padding:14px}
.wc-modal__close{background:transparent;border:none;color:var(--fg);font-size:26px;cursor:pointer}

/* ---------- Responsive ---------- */
@media (max-width: 840px){
  .menu ul{display:none}
  #menu-toggle:checked + .hamburger + ul,
  #menu-toggle:checked + .menu-icon + ul{display:flex;position:absolute;right:10px;top:52px;flex-direction:column;background:var(--card);border:1px solid var(--border);border-radius:10px;padding:10px;gap:4px}
}
